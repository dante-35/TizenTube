!function(){"use strict";function e(){e=function(){return t};var t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var r=t&&t.prototype instanceof p?t:p,a=Object.create(r.prototype),l=new P(o||[]);return i(a,"_invoke",{value:k(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f={};function p(){}function h(){}function m(){}var v={};s(v,a,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(N([])));y&&y!==n&&o.call(y,a)&&(v=y);var b=m.prototype=p.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,r,a,l){var c=d(e[i],e,r);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==typeof u&&o.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var r;i(this,"_invoke",{value:function(e,o){function i(){return new t((function(t,i){n(e,o,t,i)}))}return r=r?r.then(i,i):i()}})}function k(e,t,n){var o="suspendedStart";return function(i,r){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===i)throw r;return T()}for(n.method=i,n.arg=r;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var c=d(e,t,n);if("normal"===c.type){if(o=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,o=e.iterator[n];if(void 0===o)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=d(o,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function N(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=m,i(b,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:h,configurable:!0}),h.displayName=s(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,s(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},w(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,o,i,r){void 0===r&&(r=Promise);var a=new S(u(e,n,o,i),r);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),s(b,c,"Generator"),s(b,a,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,o){return a.type="throw",a.arg=e,t.next=n,o&&(t.method="next",t.arg=void 0),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],a=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var l=o.call(r,"catchLoc"),c=o.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function t(e,t,n,o,i,r,a){try{var l=e[r](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(o,i)}function n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r,a,l=[],c=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(o=r.call(n)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw a}}}}!function(e){function t(e){return void 0===e?0:Number(e)}function n(e,t){return e!==t&&!(isNaN(e)&&isNaN(t))}self.DOMRect=function(e,o,i,r){var a,l,c,s,u,d,f,p;a=t(e),l=t(o),c=t(i),s=t(r),Object.defineProperties(this,{x:{get:function(){return a},set:function(e){n(a,e)&&(a=e,u=d=void 0)},enumerable:!0},y:{get:function(){return l},set:function(e){n(l,e)&&(l=e,f=p=void 0)},enumerable:!0},width:{get:function(){return c},set:function(e){n(c,e)&&(c=e,u=d=void 0)},enumerable:!0},height:{get:function(){return s},set:function(e){n(s,e)&&(s=e,f=p=void 0)},enumerable:!0},left:{get:function(){return void 0===u&&(u=a+Math.min(0,c)),u},enumerable:!0},right:{get:function(){return void 0===d&&(d=a+Math.max(0,c)),d},enumerable:!0},top:{get:function(){return void 0===f&&(f=l+Math.min(0,s)),f},enumerable:!0},bottom:{get:function(){return void 0===p&&(p=l+Math.max(0,s)),p},enumerable:!0}})}}();var l,c="ytaf-configuration",s={enableAdBlock:!0,enableSponsorBlock:!0,enableSponsorBlockSponsor:!0,enableSponsorBlockIntro:!0,enableSponsorBlockOutro:!0,enableSponsorBlockInteraction:!0,enableSponsorBlockSelfPromo:!0,enableSponsorBlockMusicOfftopic:!0,videoSpeed:1,enableDeArrow:!0,enableDeArrowThumbnails:!1,focusContainerColor:"#0f0f0f",routeColor:"#0f0f0f",enableFixedUI:!0};try{l=JSON.parse(window.localStorage[c])}catch(e){console.warn("Config read failed:",e),l=s}function u(e){return void 0===l[e]&&(console.warn("Populating key",e,"with default value",s[e]),l[e]=s[e]),l[e]}function d(e,t){console.info("Setting key",e,"to",t),l[e]=t,window.localStorage[c]=JSON.stringify(l)}var f=JSON.parse;function p(e){var t,n=a(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.shelfRenderer&&h(o.shelfRenderer.content.horizontalListRenderer.items)}}catch(e){n.e(e)}finally{n.f()}}function h(e){var t,n=a(e);try{var o=function(){var n=t.value;if(n.adSlotRenderer){var o=e.indexOf(n);return e.splice(o,1),"continue"}if(u("enableDeArrow")){var i=n.tileRenderer.contentId;fetch(`https://sponsor.ajay.app/api/branding?videoID=${i}`).then((e=>e.json())).then((e=>{if(e.titles.length>0){var t=e.titles.reduce(((e,t)=>e.votes>t.votes?e:t));n.tileRenderer.metadata.tileMetadataRenderer.title.simpleText=t.title}if(e.thumbnails.length>0&&u("enableDeArrowThumbnails")){var o=e.thumbnails.reduce(((e,t)=>e.votes>t.votes?e:t));o.timestamp&&(n.tileRenderer.header.tileHeaderRenderer.thumbnail.thumbnails=[{url:`https://dearrow-thumb.ajay.app/api/v1/getThumbnail?videoID=${i}&time=${o.timestamp}`,width:1280,height:640}])}}))}};for(n.s();!(t=n.n()).done;)o()}catch(e){n.e(e)}finally{n.f()}}JSON.parse=function(){var e,t,n,o,i=f.apply(this,arguments);return i.adPlacements&&u("enableAdBlock")&&(i.adPlacements=[]),i.playerAds&&u("enableAdBlock")&&(i.playerAds=!1),i.adSlots&&u("enableAdBlock")&&(i.adSlots=[]),null!=i&&null!==(e=i.contents)&&void 0!==e&&null!==(e=e.tvBrowseRenderer)&&void 0!==e&&null!==(e=e.content)&&void 0!==e&&null!==(e=e.tvSurfaceContentRenderer)&&void 0!==e&&null!==(e=e.content)&&void 0!==e&&null!==(e=e.sectionListRenderer)&&void 0!==e&&e.contents&&u("enableAdBlock")&&(i.contents.tvBrowseRenderer.content.tvSurfaceContentRenderer.content.sectionListRenderer.contents=i.contents.tvBrowseRenderer.content.tvSurfaceContentRenderer.content.sectionListRenderer.contents.filter((e=>!e.adSlotRenderer))),null!=i&&null!==(t=i.contents)&&void 0!==t&&null!==(t=t.tvBrowseRenderer)&&void 0!==t&&null!==(t=t.content)&&void 0!==t&&null!==(t=t.tvSurfaceContentRenderer)&&void 0!==t&&null!==(t=t.content)&&void 0!==t&&null!==(t=t.sectionListRenderer)&&void 0!==t&&t.contents&&p(i.contents.tvBrowseRenderer.content.tvSurfaceContentRenderer.content.sectionListRenderer.contents),null!=i&&null!==(n=i.continuationContents)&&void 0!==n&&null!==(n=n.sectionListContinuation)&&void 0!==n&&n.contents&&p(i.continuationContents.sectionListContinuation.contents),null!=i&&null!==(o=i.continuationContents)&&void 0!==o&&null!==(o=o.horizontalListContinuation)&&void 0!==o&&o.items&&h(i.continuationContents.horizontalListContinuation.items),i};var m=function e(t){function n(e,t){return e>>>t|e<<32-t}for(var o,i,r=Math.pow,a=r(2,32),l="length",c="",s=[],u=8*t[l],d=e.h=e.h||[],f=e.k=e.k||[],p=f[l],h={},m=2;p<64;m++)if(!h[m]){for(o=0;o<313;o+=m)h[o]=m;d[p]=r(m,.5)*a|0,f[p++]=r(m,1/3)*a|0}for(t+="";t[l]%64-56;)t+="\0";for(o=0;o<t[l];o++){if((i=t.charCodeAt(o))>>8)return;s[o>>2]|=i<<(3-o)%4*8}for(s[s[l]]=u/a|0,s[s[l]]=u,i=0;i<s[l];){var v=s.slice(i,i+=16),g=d;for(d=d.slice(0,8),o=0;o<64;o++){var y=v[o-15],b=v[o-2],w=d[0],S=d[4],k=d[7]+(n(S,6)^n(S,11)^n(S,25))+(S&d[5]^~S&d[6])+f[o]+(v[o]=o<16?v[o]:v[o-16]+(n(y,7)^n(y,18)^y>>>3)+v[o-7]+(n(b,17)^n(b,19)^b>>>10)|0);(d=[k+((n(w,2)^n(w,13)^n(w,22))+(w&d[1]^w&d[2]^d[1]&d[2]))|0].concat(d))[4]=d[4]+k|0}for(o=0;o<8;o++)d[o]=d[o]+g[o]|0}for(o=0;o<8;o++)for(i=3;i+1;i--){var E=d[o]>>8*i&255;c+=(E<16?0:"")+E.toString(16)}return c};function v(e,t){for(var n=[],o=0,i=0,r=[{name:"Ad block",icon:"DOLLAR_SIGN",value:"enableAdBlock"},{name:"SponsorBlock",icon:"MONEY_HAND",value:"enableSponsorBlock"},{name:"Skip Sponsor Segments",icon:"MONEY_HEART",value:"enableSponsorBlockSponsor"},{name:"Skip Intro Segments",icon:"PLAY_CIRCLE",value:"enableSponsorBlockIntro"},{name:"Skip Outro Segments",value:"enableSponsorBlockOutro"},{name:"Skip Interaction Reminder Segments",value:"enableSponsorBlockInteraction"},{name:"Skip Self-Promotion Segments",value:"enableSponsorBlockSelfPromo"},{name:"Skip Off-Topic Music Segments",value:"enableSponsorBlockMusicOfftopic"},{name:"DeArrow",icon:"VISIBILITY_OFF",value:"enableDeArrow"},{name:"DeArrow Thumbnails",icon:"TV",value:"enableDeArrowThumbnails"},{name:"Fix UI",icon:"STAR",value:"enableFixedUI"}];i<r.length;i++){var a=r[i],l=u(a.value);n.push(S({title:a.name,subtitle:a.subtitle},{icon:a.icon?a.icon:"CHEVRON_DOWN",secondaryIcon:l?"CHECK_BOX":"CHECK_BOX_OUTLINE_BLANK"},[{setClientSettingEndpoint:{settingDatas:[{clientSettingEnum:{item:a.value},boolValue:!u(a.value)}]}},{customAction:{action:"SETTINGS_UPDATE",parameters:[o]}}])),o++}w("TizenTube Settings",n,t&&t.length>0?t[0]:0,"tt-settings",e)}function g(e,t){for(var n in window._yttv)if(window._yttv[n]&&window._yttv[n].instance&&window._yttv[n].instance.resolveCommand)return window._yttv[n].instance.resolveCommand(e,t)}function y(){var e=function(){if(window._yttv[t]&&window._yttv[t].instance&&window._yttv[t].instance.resolveCommand){var e=window._yttv[t].instance.resolveCommand;window._yttv[t].instance.resolveCommand=function(t,n){if(t.setClientSettingEndpoint){var o,i=a(t.setClientSettingEndpoint.settingDatas);try{for(i.s();!(o=i.n()).done;){if(!o.value.clientSettingEnum.item.includes("_")){var r,l=a(t.setClientSettingEndpoint.settingDatas);try{for(l.s();!(r=l.n()).done;){var c=r.value,s=Object.keys(c).find((e=>e.includes("Value"))),u="intValue"===s?Number(c[s]):c[s];d(c.clientSettingEnum.item,u)}}catch(e){l.e(e)}finally{l.f()}}}}catch(e){i.e(e)}finally{i.f()}}else if(t.customAction)return function(e,t){if("SETTINGS_UPDATE"===e)v(!0,t)}(t.customAction.action,t.customAction.parameters),!0;return e.call(this,t,n)}}};for(var t in window._yttv)e()}function b(e,t,n){var o={openPopupAction:{popupType:"TOAST",popup:{overlayToastRenderer:{title:{simpleText:e},subtitle:{simpleText:t}}}}};n&&(o.openPopupAction.popup.overlayToastRenderer.image.thumbnails=n),g(o)}function w(e,t,n,o,i){var r={openPopupAction:{popupType:"MODAL",popup:{overlaySectionRenderer:{overlay:{overlayTwoPanelRenderer:{actionPanel:{overlayPanelRenderer:{header:{overlayPanelHeaderRenderer:{title:{simpleText:e}}},content:{overlayPanelItemListRenderer:{items:t,selectedIndex:n}}}},backButton:{buttonRenderer:{accessibilityData:{accessibilityData:{label:"Back"}},command:{signalAction:{signal:"POPUP_BACK"}}}}}},dismissalCommand:{signalAction:{signal:"POPUP_BACK"}}}},uniqueId:o}};i&&(r.openPopupAction.shouldMatchUniqueId=!0,r.openPopupAction.updateAction=!0),g(r)}function S(e,t,n){var o={compactLinkRenderer:{serviceEndpoint:{commandExecutorCommand:{commands:n}}}};return e&&(o.compactLinkRenderer.title={simpleText:e.title}),e.subtitle&&(o.compactLinkRenderer.subtitle={simpleText:e.subtitle}),t&&(o.compactLinkRenderer.icon={iconType:t.icon}),t&&t.secondaryIcon&&(o.compactLinkRenderer.secondaryIcon={iconType:t.secondaryIcon}),o}var k={sponsor:{color:"#00d400",opacity:"0.7",name:"sponsored segment"},intro:{color:"#00ffff",opacity:"0.7",name:"intro"},outro:{color:"#0202ed",opacity:"0.7",name:"outro"},interaction:{color:"#cc00ff",opacity:"0.7",name:"interaction reminder"},selfpromo:{color:"#ffff00",opacity:"0.7",name:"self-promotion"},music_offtopic:{color:"#ff9900",opacity:"0.7",name:"non-music part"}};class E{constructor(e){n(this,"video",null),n(this,"active",!0),n(this,"attachVideoTimeout",null),n(this,"nextSkipTimeout",null),n(this,"sliderInterval",null),n(this,"observer",null),n(this,"scheduleSkipHandler",null),n(this,"durationChangeHandler",null),n(this,"segments",null),n(this,"skippableCategories",[]),this.videoID=e}init(){var n,o=this;return(n=e().mark((function t(){var n,i,r,a,l;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m(o.videoID).substring(0,4),i=["sponsor","intro","outro","interaction","selfpromo","music_offtopic"],e.next=4,fetch(`https://sponsorblock.inf.re/api/skipSegments/${n}?categories=${encodeURIComponent(JSON.stringify(i))}`);case 4:return r=e.sent,e.next=7,r.json();case 7:if(a=e.sent,l=a.find((e=>e.videoID===o.videoID)),console.info(o.videoID,"Got it:",l),l&&l.segments&&l.segments.length){e.next=13;break}return console.info(o.videoID,"No segments found."),e.abrupt("return");case 13:o.segments=l.segments,o.skippableCategories=o.getSkippableCategories(),o.scheduleSkipHandler=()=>o.scheduleSkip(),o.durationChangeHandler=()=>o.buildOverlay(),o.attachVideo(),o.buildOverlay();case 19:case"end":return e.stop()}}),t)})),function(){var e=this,o=arguments;return new Promise((function(i,r){var a=n.apply(e,o);function l(e){t(a,i,r,l,c,"next",e)}function c(e){t(a,i,r,l,c,"throw",e)}l(void 0)}))})()}getSkippableCategories(){var e=[];return u("enableSponsorBlockSponsor")&&e.push("sponsor"),u("enableSponsorBlockIntro")&&e.push("intro"),u("enableSponsorBlockOutro")&&e.push("outro"),u("enableSponsorBlockInteraction")&&e.push("interaction"),u("enableSponsorBlockSelfPromo")&&e.push("selfpromo"),u("enableSponsorBlockMusicOfftopic")&&e.push("music_offtopic"),e}attachVideo(){if(clearTimeout(this.attachVideoTimeout),this.attachVideoTimeout=null,this.video=document.querySelector("video"),!this.video)return console.info(this.videoID,"No video yet..."),void(this.attachVideoTimeout=setTimeout((()=>this.attachVideo()),100));console.info(this.videoID,"Video found, binding..."),this.video.addEventListener("play",this.scheduleSkipHandler),this.video.addEventListener("pause",this.scheduleSkipHandler),this.video.addEventListener("timeupdate",this.scheduleSkipHandler),this.video.addEventListener("durationchange",this.durationChangeHandler)}buildOverlay(){if(this.segmentsoverlay)console.info("Overlay already built");else if(this.video&&this.video.duration){var e=this.video.duration;this.segmentsoverlay=document.createElement("div"),this.segments.forEach((t=>{var n=o(t.segment,2),i=n[0],r=n[1],a=k[t.category]||{color:"blue",opacity:.7},l=`translateX(${i/e*100}%) scaleX(${(r-i)/e})`,c=document.createElement("div");c.classList.add("ytlr-progress-bar__played"),c.style.background=a.color,c.style.opacity=a.opacity,c.style["-webkit-transform"]=l,console.info("Generated element",c,"from",t,l),this.segmentsoverlay.appendChild(c)})),this.observer=new MutationObserver((e=>{e.forEach((e=>{if(e.removedNodes){var t,n=a(e.removedNodes);try{for(n.s();!(t=n.n()).done;){t.value===this.segmentsoverlay&&(console.info("bringing back segments overlay"),this.slider.appendChild(this.segmentsoverlay))}}catch(e){n.e(e)}finally{n.f()}}}))})),this.sliderInterval=setInterval((()=>{this.slider=document.querySelector(".ytlr-progress-bar__slider"),this.slider&&(clearInterval(this.sliderInterval),this.sliderInterval=null,this.observer.observe(this.slider,{childList:!0}),this.slider.appendChild(this.segmentsoverlay))}),500)}else console.info("No video duration yet")}scheduleSkip(){if(clearTimeout(this.nextSkipTimeout),this.nextSkipTimeout=null,this.active)if(this.video.paused)console.info(this.videoID,"Currently paused, ignoring...");else{var e=this.segments.filter((e=>e.segment[0]>this.video.currentTime-.3&&e.segment[1]>this.video.currentTime-.3));if(e.sort(((e,t)=>e.segment[0]-t.segment[0])),e.length){var t=o(e,1)[0],n=o(t.segment,2),i=n[0],r=n[1];console.info(this.videoID,"Scheduling skip of",t,"in",i-this.video.currentTime),this.nextSkipTimeout=setTimeout((()=>{var e;if(this.video.paused)console.info(this.videoID,"Currently paused, ignoring...");else if(this.skippableCategories.includes(t.category)){var n=(null===(e=k[t.category])||void 0===e?void 0:e.name)||t.category;console.info(this.videoID,"Skipping",t),b("SponsorBlock",`Skipping ${n}`),this.video.currentTime=r,this.scheduleSkip()}else console.info(this.videoID,"Segment",t.category,"is not skippable, ignoring...")}),1e3*(i-this.video.currentTime))}else console.info(this.videoID,"No more segments")}else console.info(this.videoID,"No longer active, ignoring...")}destroy(){console.info(this.videoID,"Destroying"),this.active=!1,this.nextSkipTimeout&&(clearTimeout(this.nextSkipTimeout),this.nextSkipTimeout=null),this.attachVideoTimeout&&(clearTimeout(this.attachVideoTimeout),this.attachVideoTimeout=null),this.sliderInterval&&(clearInterval(this.sliderInterval),this.sliderInterval=null),this.observer&&(this.observer.disconnect(),this.observer=null),this.segmentsoverlay&&(this.segmentsoverlay.remove(),this.segmentsoverlay=null),this.video&&(this.video.removeEventListener("play",this.scheduleSkipHandler),this.video.removeEventListener("pause",this.scheduleSkipHandler),this.video.removeEventListener("timeupdate",this.scheduleSkipHandler),this.video.removeEventListener("durationchange",this.durationChangeHandler))}}window.sponsorblock=null,window.addEventListener("hashchange",(()=>{var e=new URL(location.hash.substring(1),location.href).search.replace("?v=","").split("&")[0],t=e&&(!window.sponsorblock||window.sponsorblock.videoID!=e);if(console.info("hashchange",e,window.sponsorblock,window.sponsorblock?window.sponsorblock.videoID:null,t),t){if(window.sponsorblock){try{window.sponsorblock.destroy()}catch(e){console.warn("window.sponsorblock.destroy() failed!",e)}window.sponsorblock=null}u("enableSponsorBlock")?(window.sponsorblock=new E(e),window.sponsorblock.init()):console.info("SponsorBlock disabled, not loading")}}),!1),function(){if(!("navigate"in window)){var e={37:"left",38:"up",39:"right",40:"down"},t=null,n=null,o={element:null,rect:null},i=null;window.navigate=l,window.Element.prototype.spatialNavigationSearch=f,window.Element.prototype.focusableAreas=y,window.Element.prototype.getSpatialNavigationContainer=v,window.CSS&&CSS.registerProperty&&(""===window.getComputedStyle(document.documentElement).getPropertyValue("--spatial-navigation-contain")&&CSS.registerProperty({name:"--spatial-navigation-contain",syntax:"auto | contain",inherits:!1,initialValue:"auto"}),""===window.getComputedStyle(document.documentElement).getPropertyValue("--spatial-navigation-action")&&CSS.registerProperty({name:"--spatial-navigation-action",syntax:"auto | focus | scroll",inherits:!1,initialValue:"auto"}),""===window.getComputedStyle(document.documentElement).getPropertyValue("--spatial-navigation-function")&&CSS.registerProperty({name:"--spatial-navigation-function",syntax:"normal | grid",inherits:!1,initialValue:"normal"})),z(!1),window.addEventListener("load",(()=>{r()}))}function r(){window.addEventListener("keydown",(o=>{var i=parent&&parent.__spatialNavigation__.keyMode||window.__spatialNavigation__.keyMode,r=document.activeElement,a=e[o.keyCode];if(9===o.keyCode&&(n=null),!(!i||"NONE"===i||"SHIFTARROW"===i&&!o.shiftKey||"ARROW"===i&&o.shiftKey||o.defaultPrevented)){var c={left:!0,up:!0,right:!0,down:!0};"INPUT"!==r.nodeName&&"TEXTAREA"!==r.nodeName||(c=function(t){var n=["email","date","month","number","time","week"],o=["password","text","search","tel","url",null],i=document.activeElement,r={left:!1,up:!1,right:!1,down:!1},a=e[t.keyCode];if(void 0===a)return r;if(!n.includes(i.getAttribute("type"))||"up"!==a&&"down"!==a)if(o.includes(i.getAttribute("type"))||"TEXTAREA"===i.nodeName){var l=i.selectionStart,c=i.selectionEnd;l===c&&(0===l&&(r.left=!0,r.up=!0),c===i.value.length&&(r.right=!0,r.down=!0))}else r[a]=!0;else r[a]=!0;return r}(o)),c[a]&&(o.preventDefault(),t=new Map,l(a),t=null,n=null)}})),document.addEventListener("mouseup",(e=>{n={x:e.clientX,y:e.clientY}})),window.addEventListener("focusin",(e=>{e.target!==window&&(o.element=e.target,o.rect=e.target.getBoundingClientRect())}))}function l(e){var t=function(){var e=document.activeElement;if(!e||e===document.body&&!document.querySelector(":focus")){if(o.element&&e!==o.element){var t=window.getComputedStyle(o.element,null),n=["hidden","collapse"];if(o.element.disabled||n.includes(t.getPropertyValue("visibility")))return e=o.element}e=document.documentElement}!o.element||0!==Y(o.element).height&&0!==Y(o.element).width||(i=o.rect);if(!L(e)){var r=g(e);if(r&&(r===window||"auto"===S(r)))return r}return e}(),r=t,a=null;n&&(null===(a=document.elementFromPoint(n.x,n.y))&&(a=document.body),A(a)&&!x(a)?n=null:r=x(a)?a:a.getSpatialNavigationContainer()),r!==document&&r!==document.documentElement||(r=document.body||document.documentElement);var l=null;if((x(r)||"BODY"===r.nodeName)&&"INPUT"!==r.nodeName){"IFRAME"===r.nodeName&&(r=r.contentDocument.documentElement),l=r;if(document.activeElement===t||document.activeElement===document.body&&t===document.documentElement){if("scroll"===S(r)){if(s(r,e))return}else if("focus"===S(r)){if(c(r.spatialNavigationSearch(e,{container:r,candidates:u(r,{mode:"all"})}),e))return}else if("auto"===S(r)&&(c(r.spatialNavigationSearch(e,{container:r}),e)||s(r,e)))return}else l=l.getSpatialNavigationContainer()}var d=(l=r.getSpatialNavigationContainer()).parentElement?l.getSpatialNavigationContainer():null;if(d||window.location===window.parent.location||(d=window.parent.document.documentElement),"scroll"===S(l)){if(s(l,e))return}else"focus"===S(l)?k(r,l,d,e,"all"):"auto"===S(l)&&k(r,l,d,e,"visible")}function c(e,t){if(e){if(!b("beforefocus",e,null,t))return!0;var o=e.getSpatialNavigationContainer();return o!==window&&"focus"===S(o)?e.focus():e.focus({preventScroll:!0}),n=null,!0}return!1}function s(e,t){return N(e,t)&&!I(e,t)?(E(e,t),!0):!e.parentElement&&!_(e,t)&&(E(e.ownerDocument.documentElement,t),!0)}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{mode:"visible"},n=[];if(e.childElementCount>0){e.parentElement||(e=e.getElementsByTagName("body")[0]||document.body);var o,i=a(e.children);try{for(i.s();!(o=i.n()).done;){var r=o.value;C(r)?n.push(r):A(r)?(n.push(r),!x(r)&&r.childElementCount&&(n=n.concat(u(r,{mode:"all"})))):r.childElementCount&&(n=n.concat(u(r,{mode:"all"})))}}catch(e){i.e(e)}finally{i.f()}}return"all"===t.mode?n:n.filter(O)}function d(e,t,n,o){var i=e;return o=o||i.getSpatialNavigationContainer(),p(i,n=!n||n.length<=0?u(o):n,t,o)}function f(e,t){var o,r=this,a=[],l=[],c=function(e){var t=e.getSpatialNavigationContainer(),n=t.focusableAreas(),o=[];return n.forEach((t=>{e!==t&&R(t,e)&&o.push(t)})),o}(r);t||(t={});var s=r.getSpatialNavigationContainer(),f=u(s),p=t.container||s;t.container&&s.contains(t.container)&&(f=f.concat(u(p)));var v=t.candidates&&t.candidates.length>0?t.candidates.filter((e=>p.contains(e))):f.filter((e=>p.contains(e)&&p!==e));if(v&&v.length>0){v.forEach((e=>{e!==r&&(r.contains(e)&&r!==e?a:l).push(e)}));var g=c.filter((e=>!a.includes(e))),y=v.filter((e=>x(e)&&R(r,e))).map((e=>e.focusableAreas())).flat().filter((e=>e!==r));if(a=a.concat(g).filter((e=>p.contains(e))),(l=l.concat(y).filter((e=>p.contains(e)))).length>0&&(l=d(r,e,l,p)),i&&(o=h(r,d(r,e,a,p),e)),a&&a.length>0&&"INPUT"!==r.nodeName&&(o=function(e,t,o){return m(e,t,o,n?F:q)}(r,a,e)),(o=o||h(r,l,e))&&C(o)){var b=u(o,{mode:"all"}),w=b.length>0?r.spatialNavigationSearch(e,{candidates:b,container:o}):null;w?o=w:A(o)||(v.splice(v.indexOf(o),1),o=v.length?r.spatialNavigationSearch(e,{candidates:v,container:p}):null)}return o}return null}function p(e,t,n,o){var r,a=e.getSpatialNavigationContainer();return void 0===n?t:(r=a.parentElement&&o!==a&&!O(e)?Y(a):i||Y(e),!x(e)&&"BODY"!==e.nodeName||"INPUT"===e.nodeName?t.filter((t=>{var i=Y(t),a="IFRAME"===t.nodeName?t.contentDocument.body:null;return o.contains(t)&&t!==e&&a!==e&&B(i,r,n)&&!D(r,i)})):t.filter((t=>{var i=Y(t);return o.contains(t)&&(e.contains(t)&&D(r,i)&&t!==e||B(i,r,n))})))}function h(e,t,n){var o,r,a=e.getSpatialNavigationContainer(),l=getComputedStyle(a).getPropertyValue("--spatial-navigation-function"),c=i||Y(e);if("grid"===l)(r=t.filter((e=>j(c,Y(e),n)))).length>0&&(t=r),o=G;else o=U;return m(e,t,n,o)}function m(e,t,n,o){var r=null;window.location===window.parent.location||"BODY"!==e.nodeName&&"HTML"!==e.nodeName?r=i||e.getBoundingClientRect():((r=window.frameElement.getBoundingClientRect()).x=0,r.y=0);var a=Number.POSITIVE_INFINITY,l=[];if(t)for(var c=0;c<t.length;c++){var s=o(r,Y(t[c]),n);s<a?(a=s,l=[t[c]]):s===a&&l.push(t[c])}return 0===l.length?null:l.length>1&&o===G?m(e,l,n,W):l[0]}function v(){var e=this;do{if(!e.parentElement){e=window.location!==window.parent.location?window.parent.document.documentElement:window.document.documentElement;break}e=e.parentElement}while(!x(e));return e}function g(e){var t=e;do{if(!t.parentElement){t=window.location!==window.parent.location?window.parent.document.documentElement:window.document.documentElement;break}t=t.parentElement}while(!P(t)||!O(t));return t!==document&&t!==document.documentElement||(t=window),t}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{mode:"visible"},t=this.parentElement?this:document.body,n=Array.prototype.filter.call(t.getElementsByTagName("*"),A);return"all"===e.mode?n:n.filter(O)}function b(e,t,n,o){if(["beforefocus","notarget"].includes(e)){var i=new CustomEvent("nav"+e,{bubbles:!0,cancelable:!0,detail:{causedTarget:n,dir:o}});return t.dispatchEvent(i)}}function w(e,t){return(e.style.getPropertyValue(`--${t}`)||"").trim()}function S(e){return w(e,"spatial-navigation-action")||"auto"}function k(e,t,n,o,i){for(var r={candidates:u(t,{mode:i}),container:t};n;){if(c(e.spatialNavigationSearch(o,r),o))return;if("visible"===i&&s(t,o))return;if(!b("notarget",t,e,o))return;t===document||t===document.documentElement?window.location!==window.parent.location&&(t=(e=window.frameElement).ownerDocument.documentElement):t=n,r={candidates:u(t,{mode:i}),container:t};var a=t.getSpatialNavigationContainer();n=a!==t?a:null}r={candidates:u(t,{mode:i}),container:t},!n&&t&&c(e.spatialNavigationSearch(o,r),o)||b("notarget",r.container,e,o)&&("auto"!==S(t)||"visible"!==i||s(t,o))}function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e)switch(t){case"left":e.scrollLeft-=40+n;break;case"right":e.scrollLeft+=40+n;break;case"up":e.scrollTop-=40+n;break;case"down":e.scrollTop+=40+n}}function x(e){return!e.parentElement||"IFRAME"===e.nodeName||P(e)||function(e){return"contain"===w(e,"spatial-navigation-contain")}(e)}function C(e){return"delegable"===w(e,"spatial-navigation-contain")}function P(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("overflow-x"),o=t.getPropertyValue("overflow-y");return!!("visible"!==n&&"clip"!==n&&T(e,"left")||"visible"!==o&&"clip"!==o&&T(e,"down"))}function N(e,t){if(e&&"object"==typeof e){if(t&&"string"==typeof t){if(T(e,t)){var n=window.getComputedStyle(e,null),o=n.getPropertyValue("overflow-x"),i=n.getPropertyValue("overflow-y");switch(t){case"left":case"right":return"visible"!==o&&"clip"!==o&&"hidden"!==o;case"up":case"down":return"visible"!==i&&"clip"!==i&&"hidden"!==i}}return!1}return"HTML"===e.nodeName||"BODY"===e.nodeName||P(e)&&T(e)}}function T(e,t){if(e&&"object"==typeof e){if(!t||"string"!=typeof t)return e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight;switch(t){case"left":case"right":return e.scrollWidth>e.clientWidth;case"up":case"down":return e.scrollHeight>e.clientHeight}return!1}}function _(e,t){var n=!1;switch(t){case"left":n=0===e.scrollLeft;break;case"right":n=e.scrollWidth-e.scrollLeft-e.clientWidth==0;break;case"up":n=0===e.scrollTop;break;case"down":n=e.scrollHeight-e.scrollTop-e.clientHeight==0}return n}function I(e,t){if(N(e,t)){var n=e.scrollTop,o=e.scrollLeft,i=e.scrollHeight-e.clientHeight,r=e.scrollWidth-e.clientWidth;switch(t){case"left":return 0===o;case"right":return Math.abs(o-r)<=1;case"up":return 0===n;case"down":return Math.abs(n-i)<=1}}return!1}function L(e){var t=e.getBoundingClientRect(),n=g(e),o=null;return!(!D(o=n!==window?Y(n):new DOMRect(0,0,window.innerWidth,window.innerHeight),t)||!D(o,t))}function A(e){return!(e.tabIndex<0||function(e){return"A"===e.tagName&&null===e.getAttribute("href")&&null===e.getAttribute("tabIndex")}(e)||function(e){return!!["BUTTON","INPUT","SELECT","TEXTAREA","OPTGROUP","OPTION","FIELDSET"].includes(e.tagName)&&e.disabled}(e)||function(e){return e.inert&&!e.ownerDocument.documentElement.inert}(e)||!function(e){return!!M(e.parentElement)&&!(!M(e)||"0"===e.style.opacity||"0px"===window.getComputedStyle(e).height||"0px"===window.getComputedStyle(e).width)}(e))&&(!!(!e.parentElement||N(e)&&T(e)||e.tabIndex>=0)||void 0)}function O(e){return!e.parentElement||M(e)&&function(e){var t=Y(e);if("IFRAME"!==e.nodeName&&(t.top<0||t.left<0||t.top>e.ownerDocument.documentElement.clientHeight||t.left>e.ownerDocument.documentElement.clientWidth))return!1;var n=parseInt(e.offsetWidth)/10,o=parseInt(e.offsetHeight)/10;n=isNaN(n)?1:n,o=isNaN(o)?1:o;var i={middle:[(t.left+t.right)/2,(t.top+t.bottom)/2],leftTop:[t.left+n,t.top+o],rightBottom:[t.right-n,t.bottom-o]};for(var r in i){var a=e.ownerDocument.elementFromPoint(...i[r]);if(e===a||e.contains(a))return!0}return!1}(e)}function R(e,t){var n=Y(e),o=Y(t||e.getSpatialNavigationContainer());return!(n.left<o.left||n.right>o.right||n.top<o.top||n.bottom>o.bottom)}function M(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("visibility");return"none"!==t.getPropertyValue("display")&&!["hidden","collapse"].includes(n)}function D(e,t){var n=e.left<=t.right&&e.right>=t.right,o=e.left<=t.left&&e.right>=t.left,i=e.top<=t.top&&e.bottom>=t.top,r=e.top<=t.bottom&&e.bottom>=t.bottom;return(n||o)&&(i||r)}function B(e,t,n){switch(n){case"left":return V(t,e);case"right":return V(e,t);case"up":return H(t,e);case"down":return H(e,t);default:return!1}}function V(e,t){return e.left>=t.right||e.left>=t.left&&e.right>t.right&&e.bottom>t.top&&e.top<t.bottom}function H(e,t){return e.top>=t.bottom||e.top>=t.top&&e.bottom>t.bottom&&e.left<t.right&&e.right>t.left}function j(e,t,n){switch(n){case"left":case"right":return e.bottom>t.top&&e.top<t.bottom;case"up":case"down":return e.right>t.left&&e.left<t.right;default:return!1}}function F(e,t,o){var i=$(o,n,t),r=Math.abs(i.entryPoint.x-i.exitPoint.x),a=Math.abs(i.entryPoint.y-i.exitPoint.y);return Math.sqrt(Math.pow(r,2)+Math.pow(a,2))}function q(e,t,n){var o={left:"right",right:"left",up:"bottom",down:"top"}[n];return Math.abs(e[o]-t[o])}function U(e,t,n){var o,i,r=0,a=0,l=$(n,e,t),c=Math.abs(l.entryPoint.x-l.exitPoint.x),s=Math.abs(l.entryPoint.y-l.exitPoint.y),u=Math.sqrt(Math.pow(c,2)+Math.pow(s,2)),d=function(e,t){var n={width:0,height:0,area:0},o=[Math.max(e.left,t.left),Math.max(e.top,t.top)],i=[Math.min(e.right,t.right),Math.min(e.bottom,t.bottom)];n.width=Math.abs(o[0]-i[0]),n.height=Math.abs(o[1]-i[1]),o[0]>=i[0]||o[1]>=i[1]||(n.area=Math.sqrt(n.width*n.height));return n}(e,t),f=d.area;switch(n){case"left":case"right":j(e,t,n)?a=Math.min(d.height/e.height,1):r=e.height/2,o=30*(s+r),i=5*a;break;case"up":case"down":j(e,t,n)?a=Math.min(d.width/e.width,1):r=e.width/2,o=2*(c+r),i=5*a;break;default:o=0,i=0}return u+o-i-f}function W(e,t,n){var o=$(n,e,t),i=Math.abs(o.entryPoint.x-o.exitPoint.x),r=Math.abs(o.entryPoint.y-o.exitPoint.y);return Math.sqrt(Math.pow(i,2)+Math.pow(r,2))}function G(e,t,n){var o=$(n,e,t);return"left"===n||"right"===n?Math.abs(o.entryPoint.x-o.exitPoint.x):Math.abs(o.entryPoint.y-o.exitPoint.y)}function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"down",t=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,i={entryPoint:{x:0,y:0},exitPoint:{x:0,y:0}};if(n){switch(i.exitPoint=t,e){case"left":i.entryPoint.x=o.right;break;case"up":i.entryPoint.y=o.bottom;break;case"right":i.entryPoint.x=o.left;break;case"down":i.entryPoint.y=o.top}switch(e){case"left":case"right":n.y<=o.top?i.entryPoint.y=o.top:n.y<o.bottom?i.entryPoint.y=n.y:i.entryPoint.y=o.bottom;break;case"up":case"down":n.x<=o.left?i.entryPoint.x=o.left:n.x<o.right?i.entryPoint.x=n.x:i.entryPoint.x=o.right}}else{switch(e){case"left":i.exitPoint.x=t.left,i.entryPoint.x=o.right<t.left?o.right:t.left;break;case"up":i.exitPoint.y=t.top,i.entryPoint.y=o.bottom<t.top?o.bottom:t.top;break;case"right":i.exitPoint.x=t.right,i.entryPoint.x=o.left>t.right?o.left:t.right;break;case"down":i.exitPoint.y=t.bottom,i.entryPoint.y=o.top>t.bottom?o.top:t.bottom}switch(e){case"left":case"right":H(t,o)?(i.exitPoint.y=t.top,i.entryPoint.y=o.bottom<t.top?o.bottom:t.top):H(o,t)?(i.exitPoint.y=t.bottom,i.entryPoint.y=o.top>t.bottom?o.top:t.bottom):(i.exitPoint.y=Math.max(t.top,o.top),i.entryPoint.y=i.exitPoint.y);break;case"up":case"down":V(t,o)?(i.exitPoint.x=t.left,i.entryPoint.x=o.right<t.left?o.right:t.left):V(o,t)?(i.exitPoint.x=t.right,i.entryPoint.x=o.left>t.right?o.left:t.right):(i.exitPoint.x=Math.max(t.left,o.left),i.entryPoint.x=i.exitPoint.x)}}return i}function Y(e){var n=t&&t.get(e);if(!n){var o=e.getBoundingClientRect();n={top:Number(o.top.toFixed(2)),right:Number(o.right.toFixed(2)),bottom:Number(o.bottom.toFixed(2)),left:Number(o.left.toFixed(2)),width:Number(o.width.toFixed(2)),height:Number(o.height.toFixed(2))},t&&t.set(e,n)}return n}function z(e){var t=window.__spatialNavigation__&&window.__spatialNavigation__.keyMode;window.__spatialNavigation__=!1===e?K():Object.assign(K(),function(){function e(e,t){return N(e,t)&&!I(e,t)||!e.parentElement&&!_(e,t)}function t(t,n,o,i){var r=n,a=null;if(r!==document&&r!==document.documentElement||(r=document.body||document.documentElement),(x(r)||"BODY"===r.nodeName)&&"INPUT"!==r.nodeName){"IFRAME"===r.nodeName&&(r=r.contentDocument.body);var l=u(r,i);if(Array.isArray(l)&&l.length>0)return t?d(r,o,l):r.spatialNavigationSearch(o,{candidates:l});if(e(r,o))return t?[]:r}var c=r.getSpatialNavigationContainer(),s=c.parentElement?c.getSpatialNavigationContainer():null;for(s||window.location===window.parent.location||(s=window.parent.document.documentElement);s;){var f=p(r,u(c,i),o,c);if(Array.isArray(f)&&f.length>0){if(a=r.spatialNavigationSearch(o,{candidates:f,container:c}))return t?f:a}else{if(e(c,o))return t?[]:r;if(c===document||c===document.documentElement){if(c=window.document.documentElement,window.location!==window.parent.location){if(r=window.frameElement,!(c=window.parent.document.documentElement).parentElement){s=null;break}s=c.getSpatialNavigationContainer()}}else{if(A(c)&&(r=c),!(c=s).parentElement){s=null;break}s=c.getSpatialNavigationContainer()}}}if(!s&&c){var h=p(r,u(c,i),o,c);if(Array.isArray(h)&&h.length>0&&(a=r.spatialNavigationSearch(o,{candidates:h,container:c})))return t?h:a}if(e(c,o))return r}return{isContainer:x,isScrollContainer:P,isVisibleInScroller:L,findCandidates:t.bind(null,!0),findNextTarget:t.bind(null,!1),getDistanceFromTarget:(e,t,n)=>(x(e)||"BODY"===e.nodeName)&&"INPUT"!==e.nodeName&&u(e).includes(t)?q(Y(e),Y(t),n):U(Y(e),Y(t),n)}}()),window.__spatialNavigation__.keyMode=t,Object.seal(window.__spatialNavigation__)}function K(){return{enableExperimentalAPIs:z,get keyMode(){return this._keymode?this._keymode:"ARROW"},set keyMode(e){this._keymode=["SHIFTARROW","ARROW","NONE"].includes(e)?e:"ARROW"},setStartingPoint:function(e,t){n=e&&t?{x:e,y:t}:null}}}}();var x=".ytaf-ui-container {\r\n  position: absolute;\r\n  top: 10%;\r\n  left: 10%;\r\n  right: 10%;\r\n  bottom: 10%;\r\n\r\n  background: rgba(0, 0, 0, 0.8);\r\n  color: white;\r\n  border-radius: 20px;\r\n  padding: 20px;\r\n  font-size: 1.5rem;\r\n  z-index: 1000;\r\n}\r\n\r\n.ytaf-ui-container :focus {\r\n  outline: 4px red solid;\r\n}\r\n\r\n.ytaf-ui-container h1 {\r\n  margin: 0;\r\n  margin-bottom: 0.5em;\r\n  text-align: center;\r\n}\r\n\r\n.ytaf-ui-container input[type='checkbox'] {\r\n  width: 1.4rem;\r\n  height: 1.4rem;\r\n}\r\n\r\n.ytaf-ui-container input[type='radio'] {\r\n  width: 1.4rem;\r\n  height: 1.4rem;\r\n}\r\n\r\n.ytaf-ui-container label {\r\n  display: block;\r\n  font-size: 1.4rem;\r\n}\r\n\r\n.ytaf-notification-container {\r\n  position: absolute;\r\n  right: 10px;\r\n  bottom: 10px;\r\n  font-size: 16pt;\r\n  z-index: 1200;\r\n}\r\n\r\n.ytaf-notification-container .message {\r\n  background: rgba(0, 0, 0, 0.7);\r\n  color: white;\r\n  padding: 1em;\r\n  margin: 0.5em;\r\n  transition: all 0.3s ease-in-out;\r\n  opacity: 1;\r\n  line-height: 1;\r\n  border-right: 10px solid rgba(50, 255, 50, 0.3);\r\n  display: inline-block;\r\n  float: right;\r\n}\r\n\r\n.ytaf-notification-container .message-hidden {\r\n  opacity: 0;\r\n  margin: 0 0.5em;\r\n  padding: 0 1em;\r\n  line-height: 0;\r\n}\r\n\r\n/* Fixes transparency effect for the video player */\r\n\r\n.ytlr-watch-default__shadow {\r\n  background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0) 0, rgba(0, 0, 0, 0.8) 90%) !important;\r\n  background-color: rgba(0, 0, 0, 0.3) !important;\r\n  display: block !important;\r\n  height: 100% !important;\r\n  pointer-events: none !important;\r\n  position: absolute !important;\r\n  width: 100% !important;\r\n}",C=document.createElement("style"),P="";function N(){P=`\n    ytlr-guide-response yt-focus-container {\n        background-color: ${u("focusContainerColor")};\n    }\n\n    ytlr-surface-page {\n        background-color: ${u("routeColor")};\n    }\n\n    ytlr-search-container {\n        background-color: ${u("routeColor")};\n    }\n\n    ytlr-accounts-container {\n        background-color: ${u("routeColor")};\n    }\n`;var e=document.querySelector("style[nonce]");e?e.textContent+=P:C.textContent=P}document.head.appendChild(C),N();var T=setInterval((()=>{document.querySelector("video")&&(!function(){var e=document.querySelector("style[nonce]");if(e)e.textContent+=x;else{var t=document.createElement("style");t.textContent=x,document.head.appendChild(t)}if(u("enableFixedUI"))try{window.tectonicConfig.featureSwitches.isLimitedMemory=!1,window.tectonicConfig.clientData.legacyApplicationQuality="full-animation",window.tectonicConfig.featureSwitches.enableAnimations=!0,window.tectonicConfig.featureSwitches.enableOnScrollLinearAnimation=!0,window.tectonicConfig.featureSwitches.enableListAnimations=!0}catch(e){}window.__spatialNavigation__.keyMode="NONE";var n={37:"left",38:"up",39:"right",40:"down"},o=document.createElement("div");o.classList.add("ytaf-ui-container"),o.style.display="none",o.setAttribute("tabindex",0),o.addEventListener("focus",(()=>console.info("uiContainer focused!")),!0),o.addEventListener("blur",(()=>console.info("uiContainer blured!")),!0),o.addEventListener("keydown",(e=>{if(console.info("uiContainer key event:",e.type,e.keyCode,e),404!==e.keyCode&&172!==e.keyCode){var t;if(e.keyCode in n)navigate(n[e.keyCode]);else{if(13===e.keyCode||32===e.keyCode){console.log("OK button pressed");var i=document.querySelector(":focus");return"checkbox"===i.type&&(i.checked=!i.checked,i.dispatchEvent(new Event("change"))),e.preventDefault(),void e.stopPropagation()}if(27===e.keyCode&&"text"!==document.querySelector(":focus").type)o.style.display="none",o.blur();else if("text"===document.querySelector(":focus").type&&27===e.keyCode){var r=document.querySelector(":focus");r.value=r.value.slice(0,-1)}}"Enter"!==e.key&&"Enter"!==(null===(t=e.Uc)||void 0===t?void 0:t.key)||"text"===document.querySelector(":focus").type&&document.querySelector(":focus").dispatchEvent(new Event("change"))}}),!0),o.innerHTML='\n<h1>TizenTube Theme Configuration</h1>\n<label for="__barColor">Navigation Bar Color: <input type="text" id="__barColor"/></label>\n<label for="__routeColor">Main Content Color: <input type="text" id="__routeColor"/></label>\n<div><small>Sponsor segments skipping - https://sponsor.ajay.app</small></div>\n',document.querySelector("body").appendChild(o),o.querySelector("#__barColor").value=u("focusContainerColor"),o.querySelector("#__barColor").addEventListener("change",(e=>{d("focusContainerColor",e.target.value),N()})),o.querySelector("#__routeColor").value=u("routeColor"),o.querySelector("#__routeColor").addEventListener("change",(e=>{d("routeColor",e.target.value),N()}));var i=e=>(console.info("Key event:",e.type,e.keyCode,e.keyCode,e.defaultPrevented),403==e.keyCode?(console.info("Taking over!"),e.preventDefault(),e.stopPropagation(),"keydown"===e.type&&("none"===o.style.display?(console.info("Showing and focusing!"),o.style.display="block",o.focus()):(console.info("Hiding!"),o.style.display="none",o.blur())),!1):(404==e.keyCode&&"keydown"===e.type&&v(),!0));if(document.addEventListener("keydown",i,!0),document.addEventListener("keypress",i,!0),document.addEventListener("keyup",i,!0),setTimeout((()=>{b("Welcome to TizenTube","Press [GREEN] to open TizenTube Settings, press [BLUE] to open Video Speed Settings and press [RED] to open TizenTube Theme Settings.")}),2e3),u("enableFixedUI"))try{new MutationObserver(((e,t)=>{var n=document.body;n.classList.contains("app-quality-root")&&n.classList.remove("app-quality-root")})).observe(document.body,{attributes:!0,childList:!1,subtree:!1})}catch(e){}}(),y(),clearInterval(T))}),250);var _=setInterval((()=>{document.querySelector("video")&&(!function(){document.querySelector("video").addEventListener("canplay",(()=>{document.getElementsByTagName("video")[0].playbackRate=u("videoSpeed")}));var e=e=>{var t=u("videoSpeed");if(406==e.keyCode||191==e.keyCode){if(e.preventDefault(),e.stopPropagation(),"keydown"===e.type){for(var n=0,o=4,i=.25,r=[],l=i;l<=o;l+=i)r.push(S({title:`${l}x`},null,[{signalAction:{signal:"POPUP_BACK"}},{setClientSettingEndpoint:{settingDatas:[{clientSettingEnum:{item:"videoSpeed"},intValue:l.toString()}]}}])),t===l&&(n=r.length-1);return r.push(S({title:"Fix stuttering (1.0001x)"},null,[{signalAction:{signal:"POPUP_BACK"}},{setClientSettingEndpoint:{settingDatas:[{clientSettingEnum:{item:"videoSpeed"},intValue:"1.0001"}]}}])),w("Playback Speed",r,n,"tt-speed"),new MutationObserver(((e,t)=>{var n,o=null,i=a(document.getElementsByTagName("yt-formatted-string"));try{for(i.s();!(n=i.n()).done;){var r=n.value;if("Playback Speed"===r.innerText){o=r;break}}}catch(e){i.e(e)}finally{i.f()}o||(document.getElementsByTagName("video")[0].playbackRate=u("videoSpeed"),t.disconnect())})).observe(document.body,{childList:!0,subtree:!0}),!1}return!0}};document.addEventListener("keydown",e,!0),document.addEventListener("keypress",e,!0),document.addEventListener("keyup",e,!0)}(),clearInterval(_))}),1e3)}();
